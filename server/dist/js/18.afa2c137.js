(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"77aa":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column justify-center bg-touch",staticStyle:{height:"100vh",width:"100vw"}},[s("div",{staticClass:"col-9 self-center"},[s("q-tab-panels",{staticStyle:{"background-color":"#fafafa"},attrs:{animated:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[s("q-tab-panel",{attrs:{name:"auth"}},[s("check-member",{on:{next:function(t){e.panel="view"}}})],1),s("q-tab-panel",{attrs:{name:"view"}},[s("view-info",{on:{previous:function(t){e.panel="auth"}}})],1)],1)],1)])},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:!this.$q.fullscreen.isActive,expression:"!this.$q.fullscreen.isActive"}],staticClass:"row"},[s("q-space"),s("q-btn",{attrs:{icon:"mdi-fullscreen",flat:""},on:{click:function(t){return e.$q.fullscreen.toggle()}}})],1),e._m(0),s("touch-keyboard",{ref:"touchKeyboard",staticStyle:{width:"55vw"},on:{confirm:e.onConfirm}})],1)},c=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column items-center"},[s("div",{staticClass:"col"},[s("p",{staticClass:"auto-title"},[e._v("\n        회원번호를 입력해주세요.\n      ")])])])}],o=(s("e6cf"),s("ded3")),r=s.n(o),l=s("2f62"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row q-col-gutter-sm"},[s("q-card",{staticClass:"col-12 q-pa-md q-mb-md bg-grey-10",staticStyle:{"font-size":"26px",height:"71px","text-align":"center"},attrs:{dark:"",square:""}},[e._v("\n    "+e._s(e.value)+"\n  ")]),e._l(9,(function(t){return[s("q-btn",{key:t,staticClass:"col-4",attrs:{label:t,size:"lg",push:""},on:{click:function(s){return e.onInput(t)}}})]})),s("q-btn",{staticClass:"col-4",attrs:{label:"C",size:"lg",push:""},on:{click:e.onClear}}),s("q-btn",{staticClass:"col-4",attrs:{label:0,size:"lg",push:""},on:{click:function(t){return e.onInput(0)}}}),s("q-btn",{staticClass:"col-4",attrs:{icon:"mdi-backspace-outline",size:"md",push:""},on:{click:e.onBackspace}}),s("q-btn",{staticClass:"col-12 q-mt-md",attrs:{label:"확인",size:"lg",color:"blue-grey",push:"",dense:"",glossy:""},on:{click:e.onConfirm}})],2)},u=[],d={name:"TouchKeyboard",data(){return{value:"",requestCnt:0,limitCnt:5}},methods:{onInput(e){_.size(this.value)>5||(this.value||(this.value=""),this.value+=e)},onClear(){this.value=""},onBackspace(){_.size(this.value)>0&&(this.value=this.value.substr(0,_.size(this.value)-1))},onConfirm(){this.$emit("confirm",this.value)}}},h=d,b=s("2877"),v=s("f09f"),f=s("eb85"),p=s("9c40"),g=s("eebe"),C=s.n(g),q=Object(b["a"])(h,m,u,!1,null,null,null),k=q.exports;C()(q,"components",{QCard:v["a"],QSeparator:f["a"],QBtn:p["a"]});var y={name:"Checkin",components:{TouchKeyboard:k},async mounted(){await this.reqGetGymData()},computed:r()(r()({},Object(l["e"])("gym",["gymData"])),Object(l["e"])("memberAccess",["memberAccessData"])),methods:r()(r()(r()({},Object(l["b"])("gym",["reqGetGymData"])),Object(l["b"])("memberAccess",["reqGetMemberAccessData","reqAddMemberAccess"])),{},{memberCheck(){return new Promise(((e,t)=>{const s=`${this.memberAccessData.name}(${this.memberAccessData.special_n}) 회원님이 맞습니까?`,a={title:"본인확인",useButtons:["confirm","close"],textAlign:"left"};this.$msg.show(s,a,(function(t){return this.$msg.hide(),e("close"!==t)}))}))},async addLog(){await this.reqAddMemberAccess()},async onConfirm(e){const{code:t}=await this.reqGetMemberAccessData({specialn:+e});if("ok"===t){const e=await this.memberCheck();if(!e)return this.$refs.touchKeyboard.onClear();await this.addLog(),this.$emit("next")}}})},w=y,x=s("2c91"),$=Object(b["a"])(w,n,c,!1,null,null,null),D=$.exports;C()($,"components",{QSpace:x["a"],QBtn:p["a"]});var A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"80vw"}},[s("div",{staticClass:"row"},[s("q-btn",{attrs:{icon:"keyboard_backspace",label:"뒤로",flat:"",dense:""},on:{click:e.back}}),s("q-space"),s("q-chip",[s("q-avatar",{attrs:{color:"blue-grey-8","text-color":"white"}},[e._v(e._s(e.sec))]),e._v("\n      초 후 뒤로 이동\n    ")],1)],1),s("div",{staticClass:"shadow-2"},[s("div",{staticStyle:{"text-align":"center","padding-top":"25px"}},[s("q-icon",{staticClass:"text-green",staticStyle:{"font-size":"32px"},attrs:{name:"fas fa-check"}})],1),s("h2",{staticClass:"form-title",staticStyle:{"text-align":"center",padding:"0 0 16px 0","margin-top":"0","line-height":"160%"}},[s("b",[e._v(e._s(e.memberAccessData.name))]),e._v(" 회원님 입장 가능합니다. 환영합니다!"),s("br"),s("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.$moment().format("YY-MM-DD HH:mm"))+"에 입장하였습니다.")])])]),e._.size(e.memberAccessData.membershipTickets)>0?s("div",[s("div",{staticStyle:{"font-size":"16px","margin-bottom":"10px"}},[e._v("\n      보유 회원권\n    ")]),s("q-list",{staticClass:"shadow-2"},[e._l(e.memberAccessData.membershipTickets,(function(t,a){return[s("div",{key:a},[s("q-item",{staticClass:"bg-blue-grey-8 text-white"},[s("q-item-section",[e._v(e._s(t.session))])],1),s("q-item",[s("q-item-section",[e._v(e._s(e.$moment(t.sdate).format("YYYY-MM-DD"))+" ~ "+e._s(e.$moment(t.edate).format("YYYY-MM-DD")))])],1)],1)]}))],2)],1):e._e(),e._.size(e.memberAccessData.lessonTickets)>0?s("div",[s("div",{staticStyle:{"font-size":"16px",margin:"10px 0"}},[e._v("\n      보유 수강권\n    ")]),s("q-list",{staticClass:"shadow-2"},[e._l(e.memberAccessData.lessonTickets,(function(t,a){return[s("div",{key:a},[s("q-item",{staticClass:"bg-blue-grey-8 text-white"},[s("q-item-section",[s("span",[e._v("\n                "+e._s(t.session)+"\n                "),e.reserveInfos[t._id]?s("span",[e._l(e.reserveInfos[t._id],(function(t,a){return[s("q-chip",{key:a,attrs:{size:"sm",color:e.getReserveState(t),label:e.getReserveLabel(t),"text-color":"white"}})]}))],2):e._e()])]),s("q-item-section",{staticClass:"text-white",attrs:{side:""}},[s("div",{staticClass:"row",staticStyle:{height:"32px"}},[t.staffPhoto?s("div",{staticClass:"col"},[s("q-avatar",{attrs:{side:"",size:"36px"}},[s("img",{attrs:{src:t.staffPhoto}})])],1):e._e(),s("div",{staticClass:"col",staticStyle:{"font-size":"12px","margin-left":"5px"}},[t.staffTeam?s("div",[e._v(e._s(t.staffTeam))]):e._e(),s("div",[e._v(e._s(t.staffName))])])])])],1),s("q-item",[s("q-item-section",[e._v(e._s(e.$moment(t.sdate).format("YYYY-MM-DD"))+" ~ "+e._s(e.$moment(t.edate).format("YYYY-MM-DD")))]),s("q-item-section",{attrs:{side:""}},[e._v(e._s(t.useCnt+"/"+t.totCnt))])],1)],1)]}))],2)],1):e._e()])},S=[],z={name:"ViewInfo",data(){return{memberState:{0:{name:"결석",color:"red",tooltipColor:"red"},1:{name:"예약",color:"teal",tooltipColor:"#009688"},2:{name:"출석",color:"primary",tooltipColor:"#027be3"},3:{name:"취소",color:"purple",tooltipColor:"#a664b1"}},sec:30,secEvt:void 0}},mounted(){this.sec=30,this.secEvt=setInterval((()=>{if(0===this.sec)return this.back();this.sec--}),1e3)},computed:r()(r()({},Object(l["e"])("memberAccess",["memberAccessData"])),{},{reserveInfos(){const e={};return _.forEach(this.memberAccessData.reserves,(t=>{3!==t.state&&(_.isArray(e[t.ticketid])||(e[t.ticketid]=[]),e[t.ticketid].push(t))})),e}}),methods:{getReserveState(e){const t=_.get(e,["state"],void 0);return _.get(this.memberState,[t,"color"])},getReserveLabel(e){const t=_.get(e,["state"],void 0),s=_.get(this.memberState,[t,"name"],""),a=this.$moment(e.stime).format("HH:mm"),i=this.$moment(e.etime).format("HH:mm"),n=`${s}: ${a}~${i}`;return n},back(){clearInterval(this.secEvt),this.$emit("previous")}}},Y=z,M=(s("b25e"),s("b047")),Q=s("cb32"),I=s("0016"),j=s("1c1c"),T=s("66e5"),E=s("4074"),O=Object(b["a"])(Y,A,S,!1,null,"13b470fa",null),B=O.exports;C()(O,"components",{QBtn:p["a"],QSpace:x["a"],QChip:M["a"],QAvatar:Q["a"],QIcon:I["a"],QList:j["a"],QItem:T["a"],QItemSection:E["a"]});var G={name:"Checkin",components:{CheckMember:D,ViewInfo:B},data(){return{panel:"auth"}}},H=G,L=(s("db20"),s("adad")),P=s("823b"),K=Object(b["a"])(H,a,i,!1,null,"7af84c5d",null);t["default"]=K.exports;C()(K,"components",{QTabPanels:L["a"],QTabPanel:P["a"]})},8979:function(e,t,s){},a631:function(e,t,s){},b25e:function(e,t,s){"use strict";s("a631")},db20:function(e,t,s){"use strict";s("8979")}}]);